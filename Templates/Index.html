{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-8 mx-auto">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h3 class="card-title">Customer Churn Prediction</h3>
            </div>
            <div class="card-body">
                <form id="predictionForm" action="/predict" method="POST">
                    <div class="row g-3">
                        <!-- Personal Information -->
                        <div class="col-md-6">
                            <h5 class="section-title">Personal Information</h5>
                            <div class="mb-3">
                                <label for="gender" class="form-label">Gender</label>
                                <select class="form-select" id="gender" name="gender" required>
                                    <option value="" selected disabled>Select gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="SeniorCitizen" class="form-label">Senior Citizen</label>
                                <select class="form-select" id="SeniorCitizen" name="SeniorCitizen" required>
                                    <option value="" selected disabled>Select</option>
                                    <option value="1">Yes</option>
                                    <option value="0">No</option>
                                </select>
                            </div>
                        </div>

                        <!-- Account Information -->
                        <div class="col-md-6">
                            <h5 class="section-title">Account Information</h5>
                            <div class="mb-3">
                                <label for="tenure" class="form-label">Tenure (months)</label>
                                <input type="number" class="form-control" id="tenure" name="tenure" min="0" required>
                            </div>
                            <div class="mb-3">
                                <label for="Contract" class="form-label">Contract Type</label>
                                <select class="form-select" id="Contract" name="Contract" required>
                                    <option value="" selected disabled>Select contract</option>
                                    <option value="Month-to-month">Month-to-month</option>
                                    <option value="One year">One year</option>
                                    <option value="Two year">Two year</option>
                                </select>
                            </div>
                        </div>

                        <!-- Billing Information -->
                        <div class="col-md-6">
                            <h5 class="section-title">Billing Information</h5>
                            <div class="mb-3">
                                <label for="MonthlyCharges" class="form-label">Monthly Charges ($)</label>
                                <input type="number" step="0.01" class="form-control" id="MonthlyCharges" name="MonthlyCharges" min="0" required>
                            </div>
                            <div class="mb-3">
                                <label for="TotalCharges" class="form-label">Total Charges ($)</label>
                                <input type="number" step="0.01" class="form-control" id="TotalCharges" name="TotalCharges" min="0" required>
                            </div>
                        </div>

                        <!-- Services Information -->
                        <div class="col-md-6">
                            <h5 class="section-title">Services</h5>
                            <div class="mb-3">
                                <label for="InternetService" class="form-label">Internet Service</label>
                                <select class="form-select" id="InternetService" name="InternetService" required>
                                    <option value="" selected disabled>Select service</option>
                                    <option value="DSL">DSL</option>
                                    <option value="Fiber optic">Fiber optic</option>
                                    <option value="No">No internet service</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="PaymentMethod" class="form-label">Payment Method</label>
                                <select class="form-select" id="PaymentMethod" name="PaymentMethod" required>
                                    <option value="" selected disabled>Select method</option>
                                    <option value="Electronic check">Electronic check</option>
                                    <option value="Mailed check">Mailed check</option>
                                    <option value="Bank transfer">Bank transfer</option>
                                    <option value="Credit card">Credit card</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-primary btn-lg">Predict Churn</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('predictionForm').addEventListener('submit', function(e) {
    // You can add form validation here if needed
    // e.preventDefault(); // Uncomment if you want to handle with AJAX
    
    // Show loading spinner
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Predicting...';
    submitBtn.disabled = true;
});
</script>
{% endblock %}